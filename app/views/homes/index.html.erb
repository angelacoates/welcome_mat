<div class="page-header">
  <% if user_signed_in? %>
    <%= link_to new_home_path, class: 'btn btn-primary' do %>

      Add listing
    <% end %>
  <% end %>
  <h1>Listings</h1>
</div>
<div class="row">
  <% @homes.each do |home| %>
    <div class="col-sm-6 col-md-4">
      <div class="thumbnail">
        <% if home.image_url(:original) %>
          <%= image_tag(home.image_url(:original)) %>
        <% else %>
          No image available for home <%= home.id %>
        <% end %>
      </div>
      <div class="caption">
        <div class="row">
          <div class="col-xs-6">
            <h4>Address</h4>
            <p><%= home.address %></p>
            <h4>Price</h4>
            <p><%= home.price %></p>
          </div>
          <div class="col-xs-6">
            <h4>Bedrooms</h4>
            <p><%= home.bedrooms %></p>
            <h4>Bathrooms</h4>
            <p><%= home.bathroms %></p>
            <h5><%= home.description %></h5>
          </div>
        </div>
        <p><a href="#" class="btn btn-default"role="button">View Details</a></p>
        </div>
      </div>
    <% end %>
  </div>




<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>Address</th>
        <th>City</th>
        <th>State</th>
        <th>Zipcode</th>
        <th>Bedrooms</th>
        <th>Bathroms</th>
        <th>Squarefoot</th>
        <th>Price</th>
        <th>Description</th>
        <th>Year built</th>
        <th>Listed</th>
        <th>Image data</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody class="table-body">
      <% @homes.each do |home| %>
      <tr>
        <td><%= home.address %></td>
        <td><%= home.city %></td>
        <td><%= home.state %></td>
        <td><%= home.zipcode %></td>
        <td><%= home.bedrooms %></td>
        <td><%= home.bathroms %></td>
        <td><%= home.squarefoot %></td>
        <td><%= home.price %></td>
        <td><%= home.description %></td>
        <td><%= home.year_built %></td>

        <td>
        <% if (home.created_at).utc <= (DateTime.now + 2.days).utc %>
        <font color='green'>
          <%= distance_of_time_in_words(Time.now, home.created_at) %> ago </font>
        <% elsif (home.created_at).utc >= (DateTime.now + 30.days).utc %>
        <font color='orange'>
          <%= distance_of_time_in_words(Time.now, home.created_at) %> ago </font>
        <% else %>
           <%= distance_of_time_in_words(Time.now, home.created_at) %> ago
        <% end %>
       </td>

       <td>
       <% if home.image %>
         <%= image_tag(home.image_url(:medium)) %>
            <% else %>
              No image available
            <% end %>
          </td>

            <td>
              <%= link_to home do %>
              <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            <% end %>
            </td>
            <% if current_user && current_user == home.user %>
            <td>
              <%= link_to edit_home_path(home) do %>
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <% end %>
            </td>
            <td>
              <%= link_to home, method: :delete, data: { confirm: 'Are you sure?' } do %>
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </td>
              <% end %>
            <% end %>

      </tr>
      <% end %>



    </tbody>

  </table>
  </div>


  <%= paginate @homes %>
<%= page_entries_info @homes %>
